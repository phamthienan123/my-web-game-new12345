<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang chủ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        .top-bar {
            position: fixed;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            background: #f0f0f0;
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 0 5px #aaa;
        }
        .top-bar a {
            text-decoration: none;
            background: #007bff;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
        }
        .top-bar a.logout {
            background: #dc3545;
        }
        .section {
            margin-top: 80px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        .quest {
            margin: 10px 0;
            padding: 10px;
            background: #eee;
            border-radius: 5px;
        }
        h1, h2, h3 {
            text-align: center;
        }
    </style>
</head>
<body>

<div class="top-bar">
    <span>{{ diamonds }} 💎</span>
    <a href="/shop">🛒 Cửa hàng</a>
    <a href="/logout" class="logout">🔴 Đăng xuất</a>
</div>

<div class="section">
    <h1>Chào {{ username }}!</h1>

    {% if highest_rank %}
        <h3>🎖️ Rank hiện tại: {{ highest_rank.replace('rank_', '').capitalize() }}</h3>
    {% endif %}

    <h2>🎁 Nhiệm vụ đăng nhập</h2>
    {% if new_claim %}
        <form action="/claim/daily" method="get">
            <button type="submit">Nhận thưởng hôm nay (10 💎)</button>
        </form>
    {% else %}
        <p>✅ Bạn đã nhận thưởng hôm nay.</p>
    {% endif %}

    <h2>📝 Nhiệm vụ khác</h2>
    {% if custom_quests %}
        {% for qid, quest in custom_quests.items() %}
            <div class="quest">
                <strong>{{ quest.title }}</strong> – {{ quest.reward }} 💎
                <br>
                {% if quest.status == 'assigned' %}
                    <form method="post" action="/submit_quest/{{ qid }}">
                        <button type="submit">Gửi yêu cầu hoàn thành</button>
                    </form>
                {% elif quest.status == 'pending' %}
                    <span>⏳ Đang chờ admin duyệt...</span>
                {% elif quest.status == 'approved' %}
                    <form method="post" action="/claim_quest/{{ qid }}">
                        <button type="submit">Nhận thưởng</button>
                    </form>
                {% elif quest.status == 'claimed' %}
                    <span>✅ Đã nhận thưởng</span>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>Không có nhiệm vụ nào.</p>
    {% endif %}
</div>

</body>
</html>


